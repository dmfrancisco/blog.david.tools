<!DOCTYPE html><html data-react-helmet="lang" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><link href="/static/css/main.a2116599.css" rel="stylesheet"><title>Forking a npm package · Blog · David Francisco</title><link href="/favicon.ico" rel="shortcut icon" data-react-helmet="true"><link href="/icon.png" rel="apple-touch-icon" data-react-helmet="true"><meta content="David Marquês Francisco" data-react-helmet="true" name="author"><meta content="https://blog.david.tools" data-react-helmet="true" property="og:url"><meta content="https://blog.david.tools/icon.jpg" data-react-helmet="true" property="og:image"><meta content="summary" data-react-helmet="true" name="twitter:card"><meta content="@dmfrancisco" data-react-helmet="true" name="twitter:creator"><meta content="https://blog.david.tools/icon.jpg" data-react-helmet="true" name="twitter:image"><meta content="Whenever you want to fork a package's repository from GitHub and install with npm, but the dist files are missing, you can use a prepare script." data-react-helmet="true" name="description"><meta content="Forking a npm package" data-react-helmet="true" property="og:title"><meta content="Whenever you want to fork a package's repository from GitHub and install with npm, but the dist files are missing, you can use a prepare script." data-react-helmet="true" property="og:description"><meta content="Forking a npm package" data-react-helmet="true" name="twitter:title"><meta content="Whenever you want to fork a package's repository from GitHub and install with npm, but the dist files are missing, you can use a prepare script." data-react-helmet="true" name="twitter:description"></head><body><div id="root"><nav class="u-container Nav"><ul class="Nav-list"><li class="Nav-item"><a class="Nav-item-link" href="https://david.tools">Home</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://twitter.com/dmfrancisco">Twitter</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://github.com/dmfrancisco">GitHub</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://dribbble.com/davidfrancisco">Dribbble</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://instagram.com/dmfrancisco">Instagram</a></li><li class="Nav-item"><a class="Nav-item-link" href="mailto:hello@dmfranc.com">Email</a></li></ul></nav><article class="u-container Post"><header><a class="Posts-title Posts-title--header active" href="/" aria-current="true">Blog</a> <em class="Posts-info Posts-info--header">Mar 1, 2018 · 2 min read</em></header><div class="markdown-body"><h1><a class="anchor" href="#forking-a-npm-package" id="user-content-forking-a-npm-package" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Forking a npm package</h1><p>If you need to make some change to a package you use, you don't need to publish your changes to npm. The npm and Yarn clients let you install dependencies directly from GitHub. So if you had to fork, let's say the <code>history</code> package, you can install your fork with one of the following:</p><div class="highlight highlight-source-shell"><pre>npm install github:your_github_username/history
<span class="pl-c"><span class="pl-c">#</span> or</span>
yarn add github:your_github_username/history</pre></div><p>And every time you need to update it just run <code>upgrade</code> with the package name instead of the short repo notation:</p><div class="highlight highlight-source-shell"><pre>npm upgrade <span class="pl-c1">history</span>
<span class="pl-c"><span class="pl-c">#</span> or</span>
yarn upgrade <span class="pl-c1">history</span></pre></div><p>The problem is that for many packages you need to build the source before using it. These build files are included in the published package you download from the npm registry, but aren't available in the GitHub repository. This happens because they are listed in the project's <code>.gitignore</code>, since they aren't source and don't belong in source control.</p><p>One solution is to just change the <code>.gitignore</code> file and publish those files. An alternative option is to use a <code>prepare</code> script instead.</p><p>Going back to our example, this is how history's <code>package.json</code> looks like:</p><div class="highlight highlight-source-js"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>history<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>version<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>4.7.2<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>description<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Manage session history with JavaScript<span class="pl-pds">"</span></span>,
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
  <span class="pl-s"><span class="pl-pds">"</span>scripts<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">"</span>start<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>webpack-dev-server -d --content-base ./ --history-api-fallback --inline modules/index.js<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>build<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>node ./tools/build.js<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>prepublishOnly<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>node ./tools/build.js<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>clean<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>git clean -fdX .<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>lint<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>eslint modules<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>test<span class="pl-pds">"</span></span><span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>karma start --single-run<span class="pl-pds">"</span></span>
  },
  <span class="pl-c"><span class="pl-c">//</span> ...</span>
}</pre></div><p>Simply replace <code>prepublishOnly</code> with <code>prepare</code> and you should be good to go. In recent versions of npm and Yarn, <code>prepare</code> <a href="https://twitter.com/maybekatz/status/860363896443371520" rel="nofollow">is executed</a> after the package is installed from GitHub.</p></div></article><div id="comments-root" data-gist="7aa5138ae1dbc5748c2994956907acd0"></div><div class="u-container CommentLink"><a class="u-btn" href="https://gist.github.com/7aa5138ae1dbc5748c2994956907acd0#comments">Write a comment on GitHub</a></div></div><script src="https://platform.twitter.com/widgets.js" async charset="utf-8"></script><script src="/static/js/main.f1385085.js" type="text/javascript"></script><iframe allowtransparency="true" frameborder="0" scrolling="no" style="display:none" title="Twitter settings iframe" src="https://platform.twitter.com/widgets/widget_iframe.bed9e19e565ca3b578705de9e73c29ed.html?origin=http%3A%2F%2Flocalhost%3A45678&settingsEndpoint=https%3A%2F%2Fsyndication.twitter.com%2Fsettings"></iframe><iframe allowtransparency="true" frameborder="0" scrolling="no" style="position:absolute;visibility:hidden;display:none;width:0;height:0;padding:0;border:none" title="Twitter analytics iframe" allowfullscreen id="rufous-sandbox"></iframe></body></html>
