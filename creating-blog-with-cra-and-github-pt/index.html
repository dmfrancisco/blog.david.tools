<!DOCTYPE html><html data-react-helmet="lang" lang="pt"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport"><link href="/static/css/main.a2116599.css" rel="stylesheet"><title>Criar um blog com Create React App e GitHub üáµüáπ ¬∑ Blog ¬∑ David Francisco</title><link href="/favicon.ico" rel="shortcut icon" data-react-helmet="true"><link href="/icon.png" rel="apple-touch-icon" data-react-helmet="true"><meta content="David Marqu√™s Francisco" data-react-helmet="true" name="author"><meta content="https://blog.david.tools" data-react-helmet="true" property="og:url"><meta content="https://blog.david.tools/icon.jpg" data-react-helmet="true" property="og:image"><meta content="summary" data-react-helmet="true" name="twitter:card"><meta content="@dmfrancisco" data-react-helmet="true" name="twitter:creator"><meta content="https://blog.david.tools/icon.jpg" data-react-helmet="true" name="twitter:image"><meta content="Existem v√°rios projectos de c√≥digo aberto muito bons para criar blogs est√°ticos, e Create React App pode ser um deles, se lhe juntar ferramentas para resolver algumas das limita√ß√µes." data-react-helmet="true" name="description"><meta content="Criar um blog com Create React App e GitHub üáµüáπ" data-react-helmet="true" property="og:title"><meta content="Existem v√°rios projectos de c√≥digo aberto muito bons para criar blogs est√°ticos, e Create React App pode ser um deles, se lhe juntar ferramentas para resolver algumas das limita√ß√µes." data-react-helmet="true" property="og:description"><meta content="Criar um blog com Create React App e GitHub üáµüáπ" data-react-helmet="true" name="twitter:title"><meta content="Existem v√°rios projectos de c√≥digo aberto muito bons para criar blogs est√°ticos, e Create React App pode ser um deles, se lhe juntar ferramentas para resolver algumas das limita√ß√µes." data-react-helmet="true" name="twitter:description"></head><body><div id="root"><nav class="u-container Nav"><ul class="Nav-list"><li class="Nav-item"><a class="Nav-item-link" href="https://david.tools">Home</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://twitter.com/dmfrancisco">Twitter</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://github.com/dmfrancisco">GitHub</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://dribbble.com/davidfrancisco">Dribbble</a></li><li class="Nav-item"><a class="Nav-item-link" href="https://instagram.com/dmfrancisco">Instagram</a></li><li class="Nav-item"><a class="Nav-item-link" href="mailto:hello@dmfranc.com">Email</a></li></ul></nav><article class="u-container Post"><header><a class="Posts-title Posts-title--header active" href="/" aria-current="true">Blog</a> <em class="Posts-info Posts-info--header">Feb 20, 2018 ¬∑ 14 min read</em></header><div class="markdown-body"><h1><a class="anchor" href="#criar-um-blog-com-create-react-app-e-github" id="user-content-criar-um-blog-com-create-react-app-e-github" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Criar um blog com Create React App e GitHub</h1><p><a href="https://github.com/facebook/create-react-app">Create React App</a> √© uma ferramenta que permite criar aplica√ß√µes React com maior facilidade. Possui no entanto <a href="https://github.com/facebook/create-react-app#popular-alternatives">algumas limita√ß√µes</a> que deves ter em conta:</p><ul><li><p>A aplica√ß√£o √© renderizada apenas no cliente. Apesar de actualmente muitos motores de busca serem capazes de executar JavaScript, se a tua aplica√ß√£o √© maioritariamente est√°tica (como √© o caso dum blog) h√° vantagens em servir simplesmente ficheiros HTML renderizados por um servidor.</p></li><li><p>√â poss√≠vel manter m√∫ltiplos ficheiros HTML mas o c√≥digo JavaScript √© apenas injectado no ficheiro <code>index.html</code>. Se est√°s a criar um blog por exemplo, queres provavelmente um <code>&lt;title></code> e metatags Open Graph diferentes para cada artigo e, apesar de o conseguires fazer com JavaScript usando o <a href="https://github.com/nfl/react-helmet">react-helmet</a>, a maioria das plataformas (como o Twitter, Facebook e Slack) n√£o as utilizar√£o, uma vez que n√£o executam o c√≥digo JavaScript.</p></li><li><p>Se planeias fazer deploy para o GitHub Pages ou outro servi√ßo de static hosting similar, tem em aten√ß√£o que se o teu roteador do cliente utilizar a API pushState history, os teus visitantes podem encontrar erros 404 ao fazerem refresh. <code>http://user.github.io/posts/hello-world</code> faz com que o servidor do GitHub Pages procure pelo ficheiro <code>posts/hello-world/index.html</code> que n√£o existe. Isto √© importante para qualquer tipo de aplica√ß√£o, incluindo blogs.</p></li></ul><p>Agora que estamos a par das limita√ß√µes, podemos criar um novo blog e tentar solucion√°-las.</p><div></div><h2><a class="anchor" href="#passo-1-create-react-app-e-limpeza" id="user-content-passo-1-create-react-app-e-limpeza" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 1: Create React App e limpeza</h2><p>Come√ßamos com os ficheiros auto-gerados habituais. Verifica se tens vers√µes de Node e NPM recentes instaladas na tua m√°quina.</p><div class="highlight highlight-source-shell"><pre>npx create-react-app my-blog
<span class="pl-c1">cd</span> my-blog
npm start</pre></div><p>A aplica√ß√£o deve agora estar a correr normalmente. Vamos remover alguns dos ficheiros gerados, incluindo o <code>registerServiceWorker.js</code>. Service Workers s√£o muito √∫teis, mas √© f√°cil encontrar problemas se se n√£o tiver experi√™ncia com estes. Remove e simplifica tudo at√© que a pasta <code>src</code> esteja assim:</p><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> index.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> ReactDOM</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-dom<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> App</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>./App<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> <span class="pl-s"><span class="pl-pds">"</span>./index.css<span class="pl-pds">"</span></span>;

<span class="pl-smi">ReactDOM</span><span class="pl-k">.</span><span class="pl-en">render</span>(&lt;<span class="pl-ent"><span class="pl-c1">App</span></span> />,<span class="pl-c1"> document</span><span class="pl-k">.</span><span class="pl-en">getElementById</span>(<span class="pl-s"><span class="pl-pds">"</span>root<span class="pl-pds">"</span></span>));</pre></div><div class="highlight highlight-source-css"><pre><span class="pl-c"><span class="pl-c">/*</span> index.css <span class="pl-c">*/</span></span>

<span class="pl-ent">body</span> {
  <span class="pl-c1"><span class="pl-c1">margin</span></span>: <span class="pl-c1">0</span>;
  <span class="pl-c1"><span class="pl-c1">padding</span></span>: <span class="pl-c1">0</span>;
  <span class="pl-c1"><span class="pl-c1">font-family</span></span>: <span class="pl-c1">sans-serif</span>;
}</pre></div><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> App.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;

<span class="pl-k">export default</span> () <span class="pl-k">=></span> &lt;<span class="pl-ent">div</span> />;</pre></div><div></div><h2><a class="anchor" href="#passo-2-adicionar-um-roteador-e-alguns-componentes-b%C3%A1sicos" id="user-content-passo-2-adicionar-um-roteador-e-alguns-componentes-b√°sicos" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 2: Adicionar um roteador e alguns componentes b√°sicos</h2><p>Agora podemos executar o comando <code>npm install react-router-dom</code> de forma a podermos ter m√∫ltiplas p√°ginas. Teremos uma p√°gina para a lista de artigos e ainda uma p√°gina para cada um desses artigos.</p><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> App.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> BrowserRouter</span><span class="pl-k"> as</span><span class="pl-smi"> Router</span>,<span class="pl-smi"> Route</span>,<span class="pl-smi"> Switch</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-router-dom<span class="pl-pds">"</span></span>;

<span class="pl-k">import</span><span class="pl-smi"> Posts</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>./Posts<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> Post</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>./Post<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> NotFound</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>./NotFound<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span><span class="pl-smi"> data</span><span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>./data<span class="pl-pds">"</span></span>;

<span class="pl-k">export default</span> () <span class="pl-k">=></span> (
  &lt;<span class="pl-ent"><span class="pl-c1">Router</span></span>>
    &lt;<span class="pl-ent"><span class="pl-c1">Switch</span></span>>
      &lt;<span class="pl-ent"><span class="pl-c1">Route</span></span> <span class="pl-e">exact</span> <span class="pl-e">path</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span> <span class="pl-e">render</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">routeProps</span> <span class="pl-k">=></span> &lt;<span class="pl-ent"><span class="pl-c1">Posts</span></span> <span class="pl-pse">{</span><span class="pl-s1"><span class="pl-k">...</span><span class="pl-smi">data</span></span><span class="pl-pse">}</span> /></span><span class="pl-pse">}</span> />

      <span class="pl-pse">{</span><span class="pl-s1"><span class="pl-c1">Object</span><span class="pl-k">.</span><span class="pl-en">entries</span>(<span class="pl-smi">data</span><span class="pl-k">.</span><span class="pl-smi">posts</span>)<span class="pl-k">.</span><span class="pl-en">map</span>(([<span class="pl-smi">slug</span>,<span class="pl-smi"> post</span>]) <span class="pl-k">=></span> (</span>
<span class="pl-s1">        &lt;<span class="pl-ent"><span class="pl-c1">Route</span></span> </span>
<span class="pl-s1">          <span class="pl-e">key</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">slug</span></span><span class="pl-pse">}</span></span>
<span class="pl-s1">          <span class="pl-e">exact</span></span>
<span class="pl-s1">          <span class="pl-e">path</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-s"><span class="pl-s">`</span><span class="pl-s">/<span class="pl-e">${<span class="pl-smi">slug</span>}</span></span><span class="pl-s">`</span></span></span><span class="pl-pse">}</span></span>
<span class="pl-s1">          <span class="pl-e">render</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1">({<span class="pl-smi"> match</span> }) <span class="pl-k">=></span> &lt;<span class="pl-ent"><span class="pl-c1">Post</span></span> <span class="pl-pse">{</span><span class="pl-s1"><span class="pl-k">...</span><span class="pl-smi">post</span></span><span class="pl-pse">}</span> /></span><span class="pl-pse">}</span></span>
<span class="pl-s1">        /></span>
<span class="pl-s1">      ))</span><span class="pl-pse">}</span>

      &lt;<span class="pl-ent"><span class="pl-c1">Route</span></span> <span class="pl-e">render</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">routeProps</span> <span class="pl-k">=></span> &lt;<span class="pl-ent"><span class="pl-c1">NotFound</span></span> /></span><span class="pl-pse">}</span> />
    &lt;/<span class="pl-ent"><span class="pl-c1">Switch</span></span>>
  &lt;/<span class="pl-ent"><span class="pl-c1">Router</span></span>>
);</pre></div><div class="highlight highlight-source-js"><pre><span class="pl-c"><span class="pl-c">/*</span> data.js <span class="pl-c">*/</span></span>

<span class="pl-k">export</span> <span class="pl-c1">default</span> {
  posts<span class="pl-k">:</span> {
    <span class="pl-s"><span class="pl-pds">"</span>creating-blog-with-cra-and-github<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      date<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>2018-02-18<span class="pl-pds">"</span></span>,
      title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Creating a blog with create-react-app and GitHub<span class="pl-pds">"</span></span>,
      summary<span class="pl-k">:</span>
        <span class="pl-s"><span class="pl-pds">"</span>Create React App is a great tool that lets you start a new React application very easily. There are some limitations though that you need to be aware of.<span class="pl-pds">"</span></span>,
    },
    <span class="pl-s"><span class="pl-pds">"</span>dear-hume<span class="pl-pds">"</span></span><span class="pl-k">:</span> {
      date<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>1958-04-22<span class="pl-pds">"</span></span>,
      title<span class="pl-k">:</span> <span class="pl-s"><span class="pl-pds">"</span>Dear Hume<span class="pl-pds">"</span></span>,
      summary<span class="pl-k">:</span>
        <span class="pl-s"><span class="pl-pds">"</span>You ask advice: ah, what a very human and very dangerous thing to do! For to give advice to a man who asks what to do with his life implies something very close to egomania. To presume to point a man to the right and ultimate goal -- to point with a trembling finger in the right direction is something only a fool would take upon himself.<span class="pl-pds">"</span></span>,
    },
  },
};</pre></div><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> NotFound.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span>, {<span class="pl-smi"> Fragment</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> NavLink</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-router-dom<span class="pl-pds">"</span></span>;

<span class="pl-k">export default</span> () <span class="pl-k">=></span> (
  &lt;<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
    The page you are looking for was moved, removed,
    renamed or might never existed. &lt;<span class="pl-ent">br</span> />
    &lt;<span class="pl-ent"><span class="pl-c1">NavLink</span></span> <span class="pl-e">to</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>>Back to blog&lt;/<span class="pl-ent"><span class="pl-c1">NavLink</span></span>>
  &lt;/<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
);</pre></div><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> Posts.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span>, {<span class="pl-smi"> Fragment</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> NavLink</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-router-dom<span class="pl-pds">"</span></span>;

<span class="pl-k">export default</span> ({<span class="pl-smi"> posts</span> }) <span class="pl-k">=></span> (
  &lt;<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
    &lt;<span class="pl-ent">h1</span>>Blog&lt;/<span class="pl-ent">h1</span>>

    &lt;<span class="pl-ent">ol</span>>
      <span class="pl-pse">{</span><span class="pl-s1"><span class="pl-c1">Object</span><span class="pl-k">.</span><span class="pl-en">entries</span>(<span class="pl-smi">posts</span>)<span class="pl-k">.</span><span class="pl-en">map</span>(([<span class="pl-smi">slug</span>,<span class="pl-smi"> post</span>]) <span class="pl-k">=></span> (</span>
<span class="pl-s1">        &lt;<span class="pl-ent">li</span> <span class="pl-e">key</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">slug</span></span><span class="pl-pse">}</span>></span>
<span class="pl-s1">          &lt;<span class="pl-ent">h2</span>></span>
<span class="pl-s1">            &lt;<span class="pl-ent"><span class="pl-c1">NavLink</span></span> <span class="pl-e">to</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">slug</span></span><span class="pl-pse">}</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">post</span><span class="pl-k">.</span><span class="pl-smi">title</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent"><span class="pl-c1">NavLink</span></span>></span>
<span class="pl-s1">          &lt;/<span class="pl-ent">h2</span>></span>
<span class="pl-s1">          &lt;<span class="pl-ent">p</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">post</span><span class="pl-k">.</span><span class="pl-smi">summary</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">p</span>></span>
<span class="pl-s1">          &lt;<span class="pl-ent">em</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">post</span><span class="pl-k">.</span><span class="pl-smi">date</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">em</span>></span>
<span class="pl-s1">        &lt;/<span class="pl-ent">li</span>></span>
<span class="pl-s1">      ))</span><span class="pl-pse">}</span>
    &lt;/<span class="pl-ent">ol</span>>
  &lt;/<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
);</pre></div><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> Post.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span>, {<span class="pl-smi"> Fragment</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> NavLink</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-router-dom<span class="pl-pds">"</span></span>;

<span class="pl-k">export default</span> ({<span class="pl-smi"> date</span>,<span class="pl-smi"> title</span> }) <span class="pl-k">=></span> (
  &lt;<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
    &lt;<span class="pl-ent">h1</span>>
      &lt;<span class="pl-ent"><span class="pl-c1">NavLink</span></span> <span class="pl-e">to</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>>Blog&lt;/<span class="pl-ent"><span class="pl-c1">NavLink</span></span>>
    &lt;/<span class="pl-ent">h1</span>>
    &lt;<span class="pl-ent">h2</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">title</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">h2</span>>
    &lt;<span class="pl-ent">em</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">date</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">em</span>>
  &lt;/<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
);</pre></div><div></div><h2><a class="anchor" href="#passo-3-gerir-a-head-do-documento" id="user-content-passo-3-gerir-a-head-do-documento" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 3: Gerir a <code>head</code> do documento</h2><p>Se tudo correu bem, deves agora conseguir navegar pelas v√°rias p√°ginas. Vamos tamb√©m executar <code>npm install react-helmet</code> de forma a poder gerir tags na <code>head</code>. Neste exemplo apenas √© criado o <code>&lt;title></code> mas podes tamb√©m utiliz√°-lo para tags Open Graph ou Twitter.</p><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> App.js</span>

<span class="pl-md"><span class="pl-md">-</span>import React from "react";</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>import React, { Fragment } from "react";</span>
 import { BrowserRouter as Router, Route, Switch } from "react-router-dom";
<span class="pl-mi1"><span class="pl-mi1">+</span>import { Helmet } from "react-helmet";</span>

 import Posts from "./Posts";
 import Post from "./Post";
 import NotFound from "./NotFound";
 import data from "./data";

 export default () => (
<span class="pl-mi1"><span class="pl-mi1">+</span>  &lt;Fragment></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;Helmet titleTemplate="%s | My Blog" /></span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     &lt;Router>
       &lt;Switch>
         &lt;Route exact path="/" render={routeProps => &lt;Posts {...data} />} />
         ...
         &lt;Route render={routeProps => &lt;NotFound {...data} />} />
       &lt;/Switch>
     &lt;/Router>
<span class="pl-mi1"><span class="pl-mi1">+</span>  &lt;/Fragment></span>
 );</pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> NotFound.js</span>

 import React, { Fragment } from "react";
 import { NavLink } from "react-router-dom";
<span class="pl-mi1"><span class="pl-mi1">+</span>import { Helmet } from "react-helmet";</span>

 export default ({ nav }) => (
   &lt;Fragment>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>      &lt;title>404&lt;/title></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;/Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     The page you are looking for was moved, removed,
     renamed or might never existed. &lt;br />
     &lt;NavLink to="/">Back to blog&lt;/NavLink>
   &lt;/Fragment></pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> Posts.js</span>

 import React, { Fragment } from "react";
 import { NavLink } from "react-router-dom";
<span class="pl-mi1"><span class="pl-mi1">+</span>import { Helmet } from "react-helmet";</span>

 export default ({ posts }) => (
   &lt;Fragment>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>      &lt;title>Posts&lt;/title></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;/Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     &lt;h1>Blog&lt;/h1>

     &lt;ol></pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> Post.js</span>

 import React, { Fragment } from "react";
 import { NavLink } from "react-router-dom";
<span class="pl-mi1"><span class="pl-mi1">+</span>import { Helmet } from "react-helmet";</span>

 export default ({ gist, date, title, summary }) => (
   &lt;Fragment>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>      &lt;title>{title}&lt;/title></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    &lt;/Helmet></span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
     &lt;h1>
       &lt;NavLink to="/">Blog&lt;/NavLink>
     &lt;/h1></pre></div><div></div><h2><a class="anchor" href="#passo-4-obter-e-renderizar-o-markdown" id="user-content-passo-4-obter-e-renderizar-o-markdown" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 4: Obter e renderizar o Markdown</h2><p>Eu costumo escrever com Markdown. Tamb√©m preciso de colora√ß√£o da sintaxe e alguns estilos b√°sicos para os t√≠tulos, imagens, listas, e outros que estamos habituados a ver no GitHub. Felizmente o GitHub j√° faz tudo isto por n√≥s e oferece uma API, por isso utilizaremos o GitHub para:</p><ul><li>Escrever e armazenar os nossos artigos atrav√©s de GitHub Gists</li><li>Obter artigos e renderiz√°-los usando a API do GitHub</li><li>Utilizar a folha de estilos que o GitHub utiliza para os seus ficheiros Markdown</li></ul><p>Corremos <code>npm install github-markdown-css</code> e actualizamos os componentes em conformidade:</p><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> data.js</span>

 export default {
   posts: {
     "creating-blog-with-cra-and-github": {
<span class="pl-mi1"><span class="pl-mi1">+</span>      gist: "f4f5311ad2ec25147bc458d791fdaeb5",</span>
       date: "2018-02-18",
       title: "Creating a blog with create-react-app and GitHub",
       summary:
         "Create React App is a great tool that lets you start a new React application very easily. There are some limitations though that you need to be aware of.",
     },
     "dear-hume": {
<span class="pl-mi1"><span class="pl-mi1">+</span>      gist: "150ed6aa20f9b72ef3fcaf39ac2f89c6",</span>
       date: "1958-04-22",
       title: "Dear Hume",
       summary:</pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> index.css</span>

<span class="pl-mi1"><span class="pl-mi1">+</span>@import "~github-markdown-css";</span>
<span class="pl-mi1"><span class="pl-mi1">+</span></span>
 body {
   margin: 0;
   padding: 0;</pre></div><div class="highlight highlight-source-js-jsx"><pre><span class="pl-c"><span class="pl-c">/*</span> Post.js<span class="pl-c"> */</span></span>

<span class="pl-k">import</span><span class="pl-smi"> React</span>, {<span class="pl-smi"> Component</span>,<span class="pl-smi"> Fragment</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> NavLink</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-router-dom<span class="pl-pds">"</span></span>;
<span class="pl-k">import</span> {<span class="pl-smi"> Helmet</span> }<span class="pl-k"> from</span> <span class="pl-s"><span class="pl-pds">"</span>react-helmet<span class="pl-pds">"</span></span>;

<span class="pl-k">const</span> <span class="pl-smi">headers</span> <span class="pl-k">=</span> {<span class="pl-c1"> <span class="pl-s">Accept</span>:</span> <span class="pl-s"><span class="pl-pds">"</span>application/vnd.github.v3.json<span class="pl-pds">"</span></span> };

<span class="pl-k">export default</span> <span class="pl-k">class</span> <span class="pl-en">Post</span> <span class="pl-k">extends</span> <span class="pl-en">Component</span> {
  <span class="pl-smi">state</span> <span class="pl-k">=</span> {
<span class="pl-c1">    <span class="pl-s">content</span>:</span><span class="pl-c1"> null</span>,
  };

  <span class="pl-en">fetchData</span>() {
<span class="pl-k">    return</span><span class="pl-c1"> this</span><span class="pl-k">.</span><span class="pl-en">fetchGistMarkdownUrl</span>(<span class="pl-c1">this</span><span class="pl-k">.</span><span class="pl-smi">props</span><span class="pl-k">.</span><span class="pl-smi">gist</span>)
      <span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-c1">this</span><span class="pl-k">.</span><span class="pl-smi">fetchGistMarkdownText</span>)
      <span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-c1">this</span><span class="pl-k">.</span><span class="pl-smi">fetchRenderedMarkdown</span>);
  }

  <span class="pl-en">fetchGistMarkdownUrl</span>(<span class="pl-smi">id</span>) {
<span class="pl-k">    return</span> <span class="pl-en">fetch</span>(<span class="pl-s"><span class="pl-s">`</span><span class="pl-s">https://api.github.com/gists/<span class="pl-e">${<span class="pl-smi">id</span>}</span></span><span class="pl-s">`</span></span>, {<span class="pl-smi"> headers</span> })
      <span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-smi">response</span> <span class="pl-k">=></span><span class="pl-smi"> response</span><span class="pl-k">.</span><span class="pl-en">json</span>())
      <span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-smi">json</span> <span class="pl-k">=></span><span class="pl-c1"> Object</span><span class="pl-k">.</span><span class="pl-en">values</span>(<span class="pl-smi">json</span><span class="pl-k">.</span><span class="pl-smi">files</span>)[<span class="pl-c1">0</span>]<span class="pl-k">.</span><span class="pl-smi">raw_url</span>);
  }

  <span class="pl-en">fetchGistMarkdownText</span>(<span class="pl-smi">rawUrl</span>) {
<span class="pl-k">    return</span> <span class="pl-en">fetch</span>(<span class="pl-smi">rawUrl</span>)<span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-smi">response</span> <span class="pl-k">=></span><span class="pl-smi"> response</span><span class="pl-k">.</span><span class="pl-en">text</span>());
  }

  <span class="pl-en">fetchRenderedMarkdown</span>(<span class="pl-smi">text</span>) {
<span class="pl-k">    return</span> <span class="pl-en">fetch</span>(<span class="pl-s"><span class="pl-pds">"</span>https://api.github.com/markdown<span class="pl-pds">"</span></span>, {
<span class="pl-smi">      headers</span>,
<span class="pl-c1">      <span class="pl-s">method</span>:</span> <span class="pl-s"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>,
<span class="pl-c1">      <span class="pl-s">body</span>:</span> <span class="pl-smi">JSON</span><span class="pl-k">.</span><span class="pl-en">stringify</span>({<span class="pl-smi"> text</span> }),
    })<span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-smi">response</span> <span class="pl-k">=></span><span class="pl-smi"> response</span><span class="pl-k">.</span><span class="pl-en">text</span>());
  }

  <span class="pl-en">componentDidMount</span>() {
<span class="pl-c1">    this</span><span class="pl-k">.</span><span class="pl-en">fetchData</span>()<span class="pl-k">.</span><span class="pl-en">then</span>(<span class="pl-smi">content</span> <span class="pl-k">=></span><span class="pl-c1"> this</span><span class="pl-k">.</span><span class="pl-en">setState</span>({<span class="pl-smi"> content</span> }));
  }

  <span class="pl-en">render</span>() {
    <span class="pl-k">const</span> {<span class="pl-smi"> date</span>,<span class="pl-smi"> title</span> } <span class="pl-k">=</span><span class="pl-c1"> this</span><span class="pl-k">.</span><span class="pl-smi">props</span>;
    <span class="pl-k">const</span> {<span class="pl-smi"> content</span> } <span class="pl-k">=</span><span class="pl-c1"> this</span><span class="pl-k">.</span><span class="pl-smi">state</span>;

<span class="pl-k">    return</span> (
      &lt;<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
        &lt;<span class="pl-ent"><span class="pl-c1">Helmet</span></span>>
          &lt;<span class="pl-ent">title</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">title</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">title</span>>
        &lt;/<span class="pl-ent"><span class="pl-c1">Helmet</span></span>>

        &lt;<span class="pl-ent">h1</span>>
          &lt;<span class="pl-ent"><span class="pl-c1">NavLink</span></span> <span class="pl-e">to</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>/<span class="pl-pds">"</span></span>>Blog&lt;/<span class="pl-ent"><span class="pl-c1">NavLink</span></span>>
        &lt;/<span class="pl-ent">h1</span>>
        &lt;<span class="pl-ent">h2</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">title</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">h2</span>>
        &lt;<span class="pl-ent">em</span>><span class="pl-pse">{</span><span class="pl-s1"><span class="pl-smi">date</span></span><span class="pl-pse">}</span>&lt;/<span class="pl-ent">em</span>>

        &lt;<span class="pl-ent">div</span>
          <span class="pl-e">className</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>markdown-body<span class="pl-pds">"</span></span>
          <span class="pl-e">dangerouslySetInnerHTML</span><span class="pl-k">=</span><span class="pl-pse">{</span><span class="pl-s1">{<span class="pl-c1"> <span class="pl-s">__html</span>:</span><span class="pl-smi"> content</span> }</span><span class="pl-pse">}</span>
        />
      &lt;/<span class="pl-ent"><span class="pl-c1">Fragment</span></span>>
    );
  }
}</pre></div><div></div><h2><a class="anchor" href="#passo-5-hospedar-no-github-pages" id="user-content-passo-5-hospedar-no-github-pages" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 5: Hospedar no GitHub Pages</h2><p>Estamos prontos a enviar o nosso c√≥digo. Vou fazer <code>npm install gh-pages</code> para tornar o processo de deploy para o GitHub Pages mais f√°cil.</p><div class="highlight highlight-source-diff"><pre> {
   "name": "my-blog",
<span class="pl-mi1"><span class="pl-mi1">+</span>  "homepage": "https://myusername.github.io/my-blog",</span>
   "version": "0.1.0",
   "private": true,
   "dependencies": {
<span class="pl-mi1"><span class="pl-mi1">+</span>    "gh-pages": "^1.1.0",</span>
     "github-markdown-css": "^2.10.0",
     ...
   },
   "scripts": {
<span class="pl-mi1"><span class="pl-mi1">+</span>    "predeploy": "npm run build",</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "deploy": "gh-pages -d build",</span>
     "start": "react-scripts start",</pre></div><p>Se n√£o est√°s a utilizar um dom√≠nio personalizado, ou se esta GitHub Page √© de um projecto (que vive num caminho como <code>/my-blog</code>) ter√°s de especificar isso no roteador. Podemos usar uma vari√°vel de ambiente para isso:</p><div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> .env.production (na ra√≠z do projecto, onde se encontra o package.json)</span>

REACT_APP_BASENAME=<span class="pl-s"><span class="pl-pds">"</span>/my-blog<span class="pl-pds">"</span></span></pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> App.js</span>

 &lt;Fragment>
   &lt;Helmet titleTemplate="%s | My Blog" />
 
<span class="pl-md"><span class="pl-md">-</span>  &lt;Router></span>
<span class="pl-mi1"><span class="pl-mi1">+</span>  &lt;Router basename={process.env.REACT_APP_BASENAME}></span>
     &lt;Switch>
       &lt;Route exact path="/" render={routeProps => &lt;Posts {...data} />} /></pre></div><p>Executa <code>npm run deploy</code> e o blog deve agora estar publicamente dispon√≠vel.</p><div></div><h2><a class="anchor" href="#passo-6-pr%C3%A9-renderizar-com-react-snap" id="user-content-passo-6-pr√©-renderizar-com-react-snap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Passo 6: Pr√©-renderizar com React Snap</h2><p>Est√° na altura de ter em conta as limita√ß√µes que foram referidas no in√≠cio do artigo. Existe um projecto muito interessante chamado React Snap que usa o Puppeteer, um headless Chrome criado pela equipa do Google Chrome, que permite renderizar uma aplica√ß√£o para ficheiros HTML est√°ticos.</p><p>Vamos correr <code>npm install react-snap</code> e actualizar o nosso <code>package.json</code>:</p><div class="highlight highlight-source-diff"><pre>// package.json

     "react-router-dom": "^4.2.2",
<span class="pl-md"><span class="pl-md">-</span>    "react-scripts": "1.1.1"</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "react-scripts": "1.1.1",</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "react-snap": "^1.11.4"</span>
   },
   "scripts": {
     "predeploy": "npm run build",
     "deploy": "gh-pages -d build",
     "start": "react-scripts start",
<span class="pl-md"><span class="pl-md">-</span>    "build": "react-scripts build",</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "build": "react-scripts build && react-snap",</span>
     "test": "react-scripts test --env=jsdom",
     "eject": "react-scripts eject"
   },
<span class="pl-mi1"><span class="pl-mi1">+</span>  "reactSnap": {</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "waitFor": 1000,</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "preconnectThirdParty": false</span>
   }
 }</pre></div><p>Isto √© √∫til porque resolve tamb√©m o problema da API pushState history, uma vez que agora temos ficheiros HTML independentes. Irrelevante para este exemplo mas, no caso de precisares de caminhos din√¢micos numa aplica√ß√£o, l√™ a <a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md">documenta√ß√£o</a>, especialmente a <a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#notes-on-client-side-routing">sec√ß√£o</a> que menciona o projecto <a href="https://github.com/rafrex/spa-github-pages">spa-github-pages</a>.</p><p>Isto significa tamb√©m que n√£o precisamos de JavaScript no cliente, e portanto podemos remover esses scripts com:</p><div class="highlight highlight-source-diff"><pre>// package.json

   "reactSnap": {
     "waitFor": 1000,
<span class="pl-md"><span class="pl-md">-</span>    "preconnectThirdParty": false</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "preconnectThirdParty": false,</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>    "removeScriptTags": true</span>
   }
 }</pre></div><p>Finalmente, de forma a evitar que se atinja os limites de n√∫mero de pedidos √† API do GitHub, cria uma <a href="https://github.com/settings/tokens/new">token pessoal</a> <strong>sem scopes</strong> (uma vez que esta aparecer√° algures no ficheiro de c√≥digo minificado) e usa-a na build:</p><div class="highlight highlight-source-shell"><pre><span class="pl-c"><span class="pl-c">#</span> .env.local (na ra√≠z do projecto, deve estar listado no .gitignore)</span>

REACT_APP_ACCESS_TOKEN=<span class="pl-s"><span class="pl-pds">"</span>your-github-access-token<span class="pl-pds">"</span></span></pre></div><div class="highlight highlight-source-diff"><pre><span class="pl-c"><span class="pl-c">#</span> Post.js</span>

 import React, { Component, Fragment } from "react";
 import { NavLink } from "react-router-dom";
 import { Helmet } from "react-helmet";
<span class="pl-mi1"><span class="pl-mi1">+</span>import base64 from "base-64"; // Instala com `npm install base-64`</span>

<span class="pl-md"><span class="pl-md">-</span>const headers = { Accept: "application/vnd.github.v3.json" };</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>const accessToken = process.env.REACT_APP_ACCESS_TOKEN;</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>const headers = {</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>  Accept: "application/vnd.github.v3.json",</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>  Authorization: `Basic ${base64.encode(accessToken + ":")}`,</span>
<span class="pl-mi1"><span class="pl-mi1">+</span>};</span></pre></div><p>E √© tudo! Deves agora ter um blog criado com JavaScript que os visitantes podem ler, mesmo que tenham JavaScript desactivado.</p><p>Se este setup for suficiente para ti, √≥ptimo! Mas considera ler sobre o projecto <a href="https://www.gatsbyjs.org/" rel="nofollow">Gatsby</a>. √â muito provavelmente uma solu√ß√£o mais apropriada para um blog e pode ajudar-te com funcionalidades mais avan√ßadas, nomeadamente RSS.</p><p>Obrigado por leres. Espero que te tenha ajudado de alguma forma<g-emoji class="g-emoji" alias="wave" fallback-src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f44b.png">üëã</g-emoji></p></div></article><div id="comments-root" data-gist="ad8794fef22f015324161062fcdc2b41"></div><div class="u-container CommentLink"><a class="u-btn" href="https://gist.github.com/ad8794fef22f015324161062fcdc2b41#comments">Write a comment on GitHub</a></div></div><script src="https://platform.twitter.com/widgets.js" async charset="utf-8"></script><script src="/static/js/main.e7ffde4b.js" type="text/javascript"></script><iframe allowtransparency="true" frameborder="0" scrolling="no" style="display:none" title="Twitter settings iframe" src="https://platform.twitter.com/widgets/widget_iframe.c535a95e8a24202b16a5c12c5085d8db.html?origin=http%3A%2F%2Flocalhost%3A45678&settingsEndpoint=https%3A%2F%2Fsyndication.twitter.com%2Fsettings"></iframe><iframe allowtransparency="true" frameborder="0" scrolling="no" style="position:absolute;visibility:hidden;display:none;width:0;height:0;padding:0;border:none" title="Twitter analytics iframe" allowfullscreen id="rufous-sandbox"></iframe></body></html>
